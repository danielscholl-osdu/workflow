version: 2
updates:
  # Maven Dependencies - Application Code
  # Workflow and GitHub Actions updates are managed via template synchronization
  #
  # Strategy:
  # - PATCHES ONLY: Major and minor updates are ignored for stability
  # - GROUPED: Spring, logging, jackson, and Azure SDK patches are grouped
  # - INDIVIDUAL: All other patches get individual PRs
  # - EXCLUDED: Non-Azure providers and build tools are ignored entirely

  - package-ecosystem: "maven"
    directories:
      - "/"
      - "/*-core"
      - "/*-core-plus"
      - "/provider/*-azure"
    schedule:
      interval: "daily"
      time: "09:00"
    target-branch: "main"
    labels:
      - "dependencies"
    exclude-paths:
      - "provider/*-aws/**"
      - "provider/*-gcp/**"
      - "provider/*-gc/**"
      - "provider/*-ibm/**"
      - "provider/*-jdbc/**"
      - "testing/**"
      - "*-acceptance-test/**"
    ignore:
      # Only allow patch updates for stability
      - dependency-name: "*"
        update-types:
          - "version-update:semver-major"
          - "version-update:semver-minor"
      # Ignore build tools entirely
      - dependency-name: "org.jacoco:*"
      - dependency-name: "io.github.git-commit-id:*"
      - dependency-name: "org.projectlombok:lombok"
      - dependency-name: "org.apache.maven.plugins:*"
      - dependency-name: "org.springframework.boot:spring-boot-maven-plugin"
    groups:
      spring:
        patterns:
          - "org.springframework*"
          - "org.springframework.boot:*"
          - "org.springframework.security:*"
          - "org.springdoc:*"
      logging:
        patterns:
          - "org.slf4j:*"
          - "ch.qos.logback:*"
          - "org.apache.logging.log4j:*"
      jackson:
        patterns:
          - "com.fasterxml.jackson*"
          - "net.minidev:json-smart"
      azure:
        patterns:
          - "com.azure:*"
          - "com.azure.spring:*"
          - "com.microsoft.azure:*"
